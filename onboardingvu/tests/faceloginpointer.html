<!DOCTYPE html>
<html lang="en">
  <head>
    <title>VUSecurity</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" charset="UTF-8"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
    <link href="../css/vu.sop.ui.css" rel="stylesheet">
    <!-- <link rel="Shortcut Icon" type="image/x-icon" href="img/favicon.ico" /> -->
    <style>
    #vu\.sop {
        min-width: 320px;
        max-width: 640px;
        height: 480px;
        width: auto;
        }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
      <a class="navbar-brand" href="#">
        <!-- <img src="img/vu_logo_w.png" height="30" class="d-inline-block align-top" alt=""> -->
        <span style="margin: 0 10px">Login</span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsible-content" aria-controls="collapsible-content" aria-expanded="false" aria-label="Toggle Navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsible-content">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">

          </li>
        </ul>
        <!-- <button class="btn btn-outline-primary" id="register" onclick="window.location.replace('/facelogin');">Register</button> -->
      </div>
    </nav>
<div class="container">
<!-- -->
     <div id="vu.sop" style="max-width: 640px; max-height: 480px; margin-top: 10%;">
        <div id="vu.sop.ui" >
            <div id="vu.sop.ui.whiteLoading" class="vu.sop.ui.fullSizeDiv" style="display: block">
                <div class="vu.sop.ui.innerVerticalAlign">
                    <img class="vu.sop.ui.loadingImg" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJjb2ciIGNsYXNzPSJzdmctaW5saW5lLS1mYSBmYS1jb2cgZmEtdy0xNiIgcm9sZT0iaW1nIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik00ODcuNCAzMTUuN2wtNDIuNi0yNC42YzQuMy0yMy4yIDQuMy00NyAwLTcwLjJsNDIuNi0yNC42YzQuOS0yLjggNy4xLTguNiA1LjUtMTQtMTEuMS0zNS42LTMwLTY3LjgtNTQuNy05NC42LTMuOC00LjEtMTAtNS4xLTE0LjgtMi4zTDM4MC44IDExMGMtMTcuOS0xNS40LTM4LjUtMjcuMy02MC44LTM1LjFWMjUuOGMwLTUuNi0zLjktMTAuNS05LjQtMTEuNy0zNi43LTguMi03NC4zLTcuOC0xMDkuMiAwLTUuNSAxLjItOS40IDYuMS05LjQgMTEuN1Y3NWMtMjIuMiA3LjktNDIuOCAxOS44LTYwLjggMzUuMUw4OC43IDg1LjVjLTQuOS0yLjgtMTEtMS45LTE0LjggMi4zLTI0LjcgMjYuNy00My42IDU4LjktNTQuNyA5NC42LTEuNyA1LjQuNiAxMS4yIDUuNSAxNEw2Ny4zIDIyMWMtNC4zIDIzLjItNC4zIDQ3IDAgNzAuMmwtNDIuNiAyNC42Yy00LjkgMi44LTcuMSA4LjYtNS41IDE0IDExLjEgMzUuNiAzMCA2Ny44IDU0LjcgOTQuNiAzLjggNC4xIDEwIDUuMSAxNC44IDIuM2w0Mi42LTI0LjZjMTcuOSAxNS40IDM4LjUgMjcuMyA2MC44IDM1LjF2NDkuMmMwIDUuNiAzLjkgMTAuNSA5LjQgMTEuNyAzNi43IDguMiA3NC4zIDcuOCAxMDkuMiAwIDUuNS0xLjIgOS40LTYuMSA5LjQtMTEuN3YtNDkuMmMyMi4yLTcuOSA0Mi44LTE5LjggNjAuOC0zNS4xbDQyLjYgMjQuNmM0LjkgMi44IDExIDEuOSAxNC44LTIuMyAyNC43LTI2LjcgNDMuNi01OC45IDU0LjctOTQuNiAxLjUtNS41LS43LTExLjMtNS42LTE0LjF6TTI1NiAzMzZjLTQ0LjEgMC04MC0zNS45LTgwLTgwczM1LjktODAgODAtODAgODAgMzUuOSA4MCA4MC0zNS45IDgwLTgwIDgweiI+PC9wYXRoPjwvc3ZnPg==">
                </div>
            </div>
        </div>
    </div>
<!-- -->
</div>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="../js/vu.face.auth.js"></script>
	<script src="../js/vu.sop.audioEsPreLoad.js" type="text/javascript"></script>
<script>
    vu.face.lang  = 'es';
    vu.face.useGestures = false;

    vu.face.auth.load('..').then(
        function() {
            vu.sop.api.headers = {
              'x-access-apikey': 'd74ac1ee-bd14-4b41-8a67-674849fbc3b5'
            };
            vu.sop.api.host = "https://om-presales2.vusecurity.solutions/vu-onboarding-rest/";
            
			vu.sop.audio.enabled = true;
			vu.face.auth.warmUpFaceModelAsync = true;

			vu.sop.api.faceLogin = function(userName, image) {
				url = vu.sop.api.host + '/face/login'
				body = {
					"userName": userName,
					"applicationVersion": "1.0.0",
					"operativeSystemVersion": "6.1",
					"operationSystem": "Android",
					"deviceManufacture": "Samsung",
					"deviceName": "Iphone test",
					"selfieList": [{"file": vu.sop.api.imgData2b64(image), "imageType": "SN"}]
				}
				return vu.sop.api.doAjaxRequest(url, JSON.stringify(body), "application/json")
			}


			vu.face.auth.start().then(
				function(res) {
					if (res.identical === true){
						vu.sop.ui.alert('Successful Authentication<br>Confidence ' + Math.round(response.confidence*100) + '%').then(function (res) {
							window.location.href = "../../omdemo/index.html";
							//window.location.reload(false);
							})
					} else {
						vu.sop.ui.alert('Authentication Failed').then(function (res) {
							window.location.href = "../../omdemo/index.html";
							//window.location.reload(false);
						})
					}
				}
			)
        },function(value) {
            console.log('re',value)
        }
    )

</script>
  </body>
</html>